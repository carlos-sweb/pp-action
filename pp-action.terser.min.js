"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}
/*!!
 * Power Panel View <https://github.com/carlos-sweb/pp-action>
 * @author Carlos Illesca
 * @version 1.0.0 (2020/01/01 03:18 PM)
 * Released under the MIT License
 */(function(factory){var root=(typeof self==="undefined"?"undefined":_typeof(self))=="object"&&self.self===self&&self||(typeof global==="undefined"?"undefined":_typeof(global))=="object"&&global.global===global&&global;if(typeof define==="function"&&define.amd){define(["exports"],(function(exports){root.ppView=factory(root,exports);module.exports=root.ppView}))}else if(typeof exports!=="undefined"){factory(root,exports)}else{root.ppView=factory(root,{})}})((function(root,ppView){var lisenEvent={window:["afterprint","beforeprint","beforeunload","error","hashchange","load","message","offline","online","pagehide","pageshow","popstate","resize","storage","unload"],mouse:["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","wheel"],keyboard:["keydown","keypress","keyup"],drag:["drag","dragend","dragenter","dragleave","dragover","dragstart","drop","scroll"],clipboard:["copy","cut","paste"],media:[],form:["blur","change","contextmenu","focus","input","invalid","reset","search","select","submit"]};var setAttr=function setAttr(el,attr,vl){el.setAttribute(attr,vl)};var hasAttr=function hasAttr(el,attr){return el.hasAttribute(attr)};var getAttr=function getAttr(el,attr){return hasAttr(el,attr)?el.getAttribute(attr):""};var debounce=function debounce(func,wait){var timeoutId;return function(){if(timeoutId){clearTimeout(timeoutId)}var context=this;var args=arguments;timeoutId=setTimeout((function(){func.apply(context,args)}),wait)}};var pick=function pick(){var args=[].slice.call(arguments);var result={};if(args.length>1){var theObject=args[0];args.shift();if(_typeof(theObject)=="object"){args.forEach((function(arg){if(typeof arg=="string"){if(theObject.hasOwnProperty(arg)){result[arg]=theObject[arg]}}}))}return Object.assign(_objectSpread({},result),{})}else{return result}};var omit=function omit(){var args=[].slice.call(arguments);var result={};if(args.length>1){var theObject=args[0];args.shift();if(_typeof(theObject)=="object"){result=_objectSpread({},theObject);args.forEach((function(arg){if(typeof arg=="string"){if(theObject.hasOwnProperty(arg)){delete result[arg]}}}))}return Object.assign(_objectSpread({},result),{})}else{return result}};var getLisenEvent=function getLisenEvent(){var result=[];for(var i in lisenEvent){result=result.concat(lisenEvent[i])}return result};var modelHelperAttributes=function modelHelperAttributes(el){var model=getAttr(el,"pp-model"),debounceTime=getAttr(el,"pp-model-debounce"),form=getAttr(el,"pp-data-form"),type=hasAttr(el,"type")?el.type.toLowerCase():"";return{model:model,debounceTime:debounceTime==null?0:debounceTime,debounceValue:parseInt(debounceTime==null?0:debounceTime),type:type,form:form}};return function(options){var _this8=this;this.saferEval=function(expression,dataContext){var additionalHelperVariables=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return new Function(["$data"].concat(_toConsumableArray(Object.keys(additionalHelperVariables))),"var result; with($data) { result = ".concat(expression," };return result")).bind(this).apply(void 0,[dataContext].concat(_toConsumableArray(Object.values(additionalHelperVariables))))};this.events={};this.on=function(eventName,callbacks){if(typeof eventName=="string"){if(typeof callbacks=="function"){if(!this.events.hasOwnProperty(eventName)){this.events[eventName]=[]}this.events[eventName].push(callbacks)}}};this.removeListener=function(eventName,callbacks){var idx;if(_typeof(this.events[eventName])==="object"){}};this.emit=function(eventName){var i,listeners,length,args=[].slice.call(arguments,1);if(_typeof(this.events[eventName])==="object"){listeners=this.events[eventName].slice();length=listeners.length;for(i=0;i<length;i++){listeners[i].apply(this,args)}}};this.el=document.querySelector(options.el||null);this.watch=options.watch||{};this.form=options.form||{};this.$form={};this.data=options.data||{};this.methods=options.methods||{};this.filters=options.filters||{};this.template=options.template||null;this.isBooleanAttr=function(attrName){var booleanAttributes=["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"];return booleanAttributes.includes(attrName)};this.el.innerHTML=this.template;this.detectingChangeData=function(data,NativeEvent){var keys=Object.keys(data);for(var i=0;i<keys.length;i++){var key=keys[i];if(data.hasOwnProperty(key)){if(data[key]!=this.data[key]){if(this.watch.hasOwnProperty(key)){if(typeof this.watch[key]=="function"){this.watch[key](data[key],this.data[key],NativeEvent)}}this.emit("dataChange");break}}else{if(this.watch.hasOwnProperty(key)){if(typeof this.watch[key]=="function"){this.watch[key](data[key],this.data[key],NativeEvent)}}this.emit("dataChange");break}}};this.handleFormDirective=function(el){var _this=this;if(hasAttr(el,"name")){var nameForm=getAttr(el,"name");if(typeof nameForm=="string"&&nameForm!=""){if(!this.$form.hasOwnProperty(nameForm)){this.$form[nameForm]={$valid:true,$dirty:false}}var othersDirectives=Array.from(el.querySelectorAll("[pp-text],[pp-show],[pp-class],[pp-model],[pp-click],[pp-disabled]"));othersDirectives.forEach((function(e){return!e.hasAttribute("pp-data-form")&&e.setAttribute("pp-data-form",nameForm)}));var inputs=Array.from(el.querySelectorAll("input[pp-model],select[pp-model],textarea[pp-model]"));inputs.forEach((function(input){if(input.hasAttribute("pp-model")){var model=input.getAttribute("pp-model");if(typeof model=="string"&&model!=""){if(_this.data.hasOwnProperty(model)){_this.$form[nameForm][model]={$required:input.hasAttribute("required"),$valid:input.hasAttribute("required")&&input.value==""?false:true,$dirty:false,$value:input.value}}}}}))}}};this.handleRequiredDirective=function(el,output){if(typeof output=="boolean"&&["INPUT","TEXTAREA"].indexOf(el.tagName)!=-1){var updateRequired=function updateRequired(__el){var nameForm=getAttr(__el,"pp-data-form"),model=getAttr(__el,"pp-model");if(this.$form.hasOwnProperty(nameForm)){if(this.$form[nameForm].hasOwnProperty(model)){if(this.$form[nameForm][model].$required!=output){this.$form[nameForm][model].$required=output;this.emit("dataChange")}}}};if(output==true&&el.hasAttribute("required")==false){el.setAttribute("required","");updateRequired.bind(this)(el)}if(output==false&&el.hasAttribute("required")==true){el.removeAttribute("required");var nameForm=getAttr(el,"pp-data-form");var model=getAttr(el,"pp-model");if(this.$form.hasOwnProperty(nameForm)){if(this.$form[nameForm].hasOwnProperty(model)){if(this.$form[nameForm][model].$required!=output){this.$form[nameForm][model].$required=output;this.emit("dataChange")}}}}}};this.handleReadonlyDirective=function(el,output){if(typeof output=="boolean"&&["INPUT","TEXTAREA"].indexOf(el.tagName)!=-1){output?setAttr(el,"readonly",""):el.removeAttribute("readonly")}};this.handleDisabledDirective=function(el,output){if(typeof output=="boolean"&&["INPUT","SELECT","BUTTON","TEXTAREA"].indexOf(el.tagName)!=-1){el.disabled=output}};this.handleTextDirective=function(el,output){var old_value=el.innerText;if((typeof output=="function"?output():output)!=old_value){el.innerText=typeof output==="function"?output():output}};this.handleHtmlDirective=function(el,output){var old_value=el.innerHTML;el.innerHTML=typeof output==="function"?output():output;this.initialize(el)};this.handleShowDirective=function(el,output){el.style.display=output?"":"none"};this.initializeModel=function(el){var _this2=this;var tagInputAccept=["INPUT","SELECT","TEXTAREA"],el=el||this.el,attrEls=el.querySelectorAll("[pp-model]");if(attrEls.length>0){attrEls.forEach((function(attrEl){var tg=attrEl.tagName;if(tagInputAccept.indexOf(tg)!=-1){tg=="INPUT"&&_this2.modelInput(attrEl);tg=="SELECT"&&_this2.modelSelect(attrEl)}}))}};this.modelSelect=function(input){var _this3=this;var _modelHelperAttribute=modelHelperAttributes(input),model=_modelHelperAttribute.model,debounceTime=_modelHelperAttribute.debounceTime,debounceValue=_modelHelperAttribute.debounceValue,form=_modelHelperAttribute.form;var options=input.querySelectorAll("option");if(options.length>0){options.forEach((function(option){if(option.value==_this3.data[model].toString()){option.setAttribute("selected","")}else{if(option.hasAttribute("selected")){option.removeAttribute("selected")}}}))}var debounceFunction=debounce((function(event){var format=event.target.getAttribute("pp-model-format");switch(format){case null:_this3.data[model]=event.target.value;break;case"string":_this3.data[model]=event.target.value.toString();break;case"number":_this3.data[model]=parseInt(event.target.value);break}_this3.emit("dataChange")}),debounceValue);input.addEventListener("change",debounceFunction)};this.modelInput=function(input){var _this4=this;var _modelHelperAttribute2=modelHelperAttributes(input),model=_modelHelperAttribute2.model,debounceTime=_modelHelperAttribute2.debounceTime,debounceValue=_modelHelperAttribute2.debounceValue,type=_modelHelperAttribute2.type,form=_modelHelperAttribute2.form;if(this.data.hasOwnProperty(model)){input.value=this.data[model].toString();if(this.$form.hasOwnProperty(form)){if(this.$form[form].hasOwnProperty(model)){this.$form[form][model].$value=input.value}}}var debounceFunction=debounce((function(event){if(_this4.data[model].toString()!==event.target.value){if(_this4.watch.hasOwnProperty(model)){if(typeof _this4.watch[model]=="function"){try{_this4.watch[model](event.target.value,_this4.data[model],event)}catch(errorWatch){console.log(errorWatch)}}}switch(type){case"text":_this4.data[model]=event.target.value;if(_this4.$form.hasOwnProperty(form)){if(_this4.$form[form].hasOwnProperty(model)){_this4.$form[form][model].$value=event.target.value}}break}_this4.emit("dataChange")}}),debounceValue);lisenEvent.keyboard.forEach((function(eventName){input.addEventListener(eventName,debounceFunction)}))};this.modelSetValue=function(el){var _this5=this;var el=el||this.el;var m=Object.values(Array.from(this.el.querySelectorAll("[pp-model]")));m.forEach((function(input){var _modelHelperAttribute3=modelHelperAttributes(input),form=_modelHelperAttribute3.form,model=_modelHelperAttribute3.model;if(["INPUT","SELECT","TEXTAREA"].indexOf(input.tagName)!=-1){if(_this5.data.hasOwnProperty(model)){if(input.value!=_this5.data[model].toString()){input.value=_this5.data[model];if(_this5.$form.hasOwnProperty(form)){if(_this5.$form[form].hasOwnProperty(model)){_this5.$form[form][model].$value=_this5.data[model]}}}}}}))};this.initializeDirectivesComplex=function(el){};this.initializeDirectives=function(el){var _this6=this;var el=el||this.el;var attributesCatch=["text","html","show","disabled","readonly","required"];attributesCatch.forEach((function(attrCatch){var attrEls=el.querySelectorAll("[pp-"+attrCatch+"]");if(attrEls.length>0){attrEls.forEach((function(attrEl){var expression=attrEl.getAttribute("pp-"+attrCatch);if(expression!=""&&expression!=null){var expressionArray=expression.split("|").map((function(value){return value.trim()}));var output="";var form=attrEl.getAttribute("pp-data-form");var $form=void 0;if(form!=null){if(_this6.$form.hasOwnProperty(form)){$form=_this6.$form[form]}}try{output=_this6.saferEval(expressionArray[0],_objectSpread(_objectSpread({},_this6.data),{$form:$form}),_this6.methods);if(expressionArray.length>1){for(var iterator=1;iterator<expressionArray.length;iterator++){var Filtro=expressionArray[iterator];if(_this6.filters.hasOwnProperty(Filtro)){if(typeof output=="string"){output=_this6.filters[Filtro](output)}}}}}catch(messageError){console.warn(messageError)}switch(attrCatch){case"text":_this6.handleTextDirective(attrEl,output);break;case"show":_this6.handleShowDirective(attrEl,output);break;case"html":_this6.handleHtmlDirective(attrEl,output);break;case"disabled":_this6.handleDisabledDirective(attrEl,output);break;case"readonly":_this6.handleReadonlyDirective(attrEl,output);break;case"required":_this6.handleRequiredDirective(attrEl,output);break}}}))}}))};this.HelperFunctionInitialize=function(NativeEvent,stringAttribute){var expression=NativeEvent.target.getAttribute(stringAttribute);var $data=_objectSpread({},this.data);var form=NativeEvent.target.getAttribute("pp-data-form");var $form=null;if(this.$form.hasOwnProperty(form)){$form=this.$form[form]}var $dataTemporal=Object.assign(_objectSpread({},this.data),{$el:NativeEvent.target,$event:NativeEvent,$form:$form});try{var safer=this.saferEval(expression,$dataTemporal,this.methods)}catch(messageError){console.log(messageError)}this.data=_objectSpread({},omit($dataTemporal,"$el","$event"));this.detectingChangeData($data,NativeEvent)};this.initialize=function(el){var _this7=this;var iTime=Date.now();var el=el||this.el;getLisenEvent().forEach((function(lEvent){var ElementEvent=el.querySelectorAll("[pp-"+lEvent+"]");if(ElementEvent.length>0){ElementEvent.forEach((function(ElEvent){var expresion=ElEvent.getAttribute("pp-"+lEvent);var handle=function(root){return function handlef(NativeEvent){root.HelperFunctionInitialize(NativeEvent,"pp-"+lEvent)}}(_this7);ElEvent.addEventListener(lEvent,handle)}))}var ElementEventOnce=el.querySelectorAll("[pp-"+lEvent+"-once]");if(ElementEventOnce.length>0){ElementEventOnce.forEach((function(ElEventOnce){var expresionOnce=ElEventOnce.getAttribute("pp-"+lEvent+"-once");var handleOnce=function(root){return function handlefunction(NativeEvent){root.HelperFunctionInitialize(NativeEvent,"pp-"+lEvent+"-once");NativeEvent.target.removeEventListener(NativeEvent.type,handlefunction)}}(_this7);ElEventOnce.addEventListener(lEvent,handleOnce)}))}}));el.querySelectorAll("[pp-form]").forEach((function(elForm){elForm.setAttribute("pp-data-form",getAttr(elForm,"name"));_this7.handleFormDirective(elForm)}));this.initializeModel(el);this.initializeDirectivesAll(el);console.log(Date.now()-iTime)};this.initializeDirectivesAll=function(el){this.initializeDirectivesComplex(el);this.initializeDirectives(el)};this.on("dataChange",(function(){_this8.modelSetValue(_this8.el);_this8.initializeDirectivesAll(_this8.el)}));this.initialize(this.el);this.emit("finished")}}));